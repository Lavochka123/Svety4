<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Приглашение — Страница 3</title>
  <link rel="stylesheet" href="/static/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <script>
    function handleResponse(response) {
      if (response === 'no') {
        fetch('/response', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            chat_id: "{{ data.chat_id }}",
            response: 'Извини, не могу'
          })
        })
        .then(r => r.json())
        .then(resp => {
          if (resp.status === 'ok') {
            alert("Ваш отказ отправлен!");
          } else {
            alert("Ошибка при отправке ответа: " + resp.message);
          }
        })
        .catch(err => {
          alert("Ошибка: " + err);
        });
      }
    }
  </script>
</head>
<body>
  <div class="container">
    <h1>Приглашение</h1>
    <p>{{ data.page3 }}</p>
    <div style="margin-top: 20px;">
      <button class="button" onclick="handleResponse('no')">Нет</button>
      <a href="/invite/{{ data.id }}/page4" class="button">Да</a>
    </div>
  </div>
</body>
</html>
